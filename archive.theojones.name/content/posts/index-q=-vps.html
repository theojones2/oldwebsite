<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Theo Jones</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="initial-scale=1.0" media="(device-height: 568px)"/>
    <meta name="description" content="Thoughts and Ideas">
    <meta name="generator" content="Known https://withknown.com">
    <meta http-equiv="Content-Language" content="en">

    <!--Le fav and touch icons-->
<link rel="apple-touch-icon" sizes="57x57" href="../../gfx/logos/apple-icon-57x57.png" />
<link rel="apple-touch-icon" sizes="72x72" href="../../gfx/logos/apple-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="../../gfx/logos/apple-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="../../gfx/logos/apple-icon-144x144.png" />    <link rel="shortcut icon" type="image/png" href="https://www.theojones.name/file/de911cc1bf544396092c15df5d71aa2e">
<!-- Make this an "app" when saved to an ios device's home screen -->
<link rel="apple-touch-icon-precomposed" href="https://www.theojones.name/file/de911cc1bf544396092c15df5d71aa2e">
<!-- Make this an "app" when saved to an ios device's home screen -->
<link rel="apple-touch-icon" href="https://www.theojones.name/file/de911cc1bf544396092c15df5d71aa2e">
<!-- <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black"> -->
    <meta property="og:type" content="website" />
<meta property="og:title" content="Theo Jones" />
<meta property="og:site_name" content="Theo Jones" />
<meta property="og:image" content="https://www.theojones.name/file/de911cc1bf544396092c15df5d71aa2e" />


    <!-- Dublin Core -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
    <meta name="DC.title" content="Theo Jones">
    <meta name="DC.description" content="Thoughts and Ideas">    <!-- AMP versions -->
    <link rel="amphtml" href="index-q=-vps&amp;_t=amp.html">

    <!-- We need jQuery at the top of the page -->
    <script src="../../external/jquery/jquery.min.js"></script>

    <!-- Le styles -->
    <link
        href="../../external/bootstrap/assets/css/bootstrap.min.css"
        rel="stylesheet"/>
    <link
        href="../../external/bootstrap/assets/css/bootstrap-theme.min.css"/>
    <script
        src="../../external/bootstrap/assets/js/bootstrap.min.js"></script>

    <!-- Accessibility -->
    <link rel="stylesheet"
          href="../../external/paypal-bootstrap-accessibility-plugin/plugins/css/bootstrap-accessibility_1.0.3.css">
    <script
        src="../../external/paypal-bootstrap-accessibility-plugin/plugins/js/bootstrap-accessibility_1.0.3.min.js"></script>

    <!-- Fonts -->
    <link rel="stylesheet"
          href="../../external/font-awesome/css/font-awesome.css">
    <!--<link rel="stylesheet"
          href="https://www.theojones.name/external/font-awesome/css/font-awesome.min.css">-->
    <style>body {
            padding-top: 100px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>

    <link href="../../css/default-20150907.css" rel="stylesheet">
<link href="../../css/defaultb3-20150123.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script
        src="https://www.theojones.name/external/bootstrap/assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Default Known JavaScript -->
    <script src="../../js/default-20150406.js"></script>

    <!-- To silo is human, to syndicate divine -->
    <link rel="alternate" type="application/rss+xml" title="Theo Jones"
          href="index-q=-vps&amp;_t=rss.rss"/>
    <link rel="feed" type="application/rss+xml" title="Theo Jones"
          href="index-q=-vps&amp;_t=rss.rss"/>
    <link rel="alternate feed" type="application/rss+xml"
          title="Theo Jones: all content"
          href="../all-_t=rss.rss"/>
    <link rel="feed" type="text/html" title="Theo Jones"
          href="../all.html"/>

    <!-- Webmention endpoint -->
    <link href="../../webmention/index.html" rel="http://webmention.org/"/>
    <link href="../../webmention/index.html" rel="webmention"/>

                <!-- Pubsubhubbub -->
        <link href="http://withknown.superfeedr.com/" rel="hub"/>
    
    
    <script src="../../external/fragmention/fragmention.js"></script>

    <!-- Syndication -->
    <link
        href="../../external/bootstrap-toggle/css/bootstrap-toggle.min.css"
        rel="stylesheet"/>
    <script
        src="../../external/bootstrap-toggle/js/bootstrap-toggle.js"></script>

    <style>.withknown-plugin {
        padding-top: 0.25em;
        padding-bottom: 0.25em;
        background-color: #fff;
        margin-bottom: 0.5em;
    }

    .withknown-plugin p,
    .withknown-plugin h4,
    .withknown-plugin form
    {
        margin: 0; padding: 0;
    }

    .withknown-plugin .plugin-content h4
    {
        padding-top: 0.25em;
    }

    .withknown-plugin .plugin-content p
    {
        padding-top: 0.3em;
    }

    .withknown-plugin .plugin-content {
        color: #777;
    }

    .withknown-plugin input[type=submit]
    {
        width: 100px;
    }
    
    .withknown-plugin .btn-enabled {
    background-color: #70997a;
    background-image: none;
    background-repeat: repeat-x;
    border-color: #70997a;
    color: #ffffff;
    text-shadow: none;
	}
	
	.withknown-plugin .btn-enabled:hover, 
	.withknown-plugin .btn-enabled:focus, 
	.withknown-plugin .btn-enabled:active, 
	.withknown-plugin .btn-enabled.active, 
	.withknown-plugin .btn-enabled.disabled, 
	.withknown-plugin .btn-enabled[disabled] {
    background-color: #678c70;
    border-color: #678c70;
    color: #ffffff;
	}
	
	.withknown-plugin .btn-default {
	color: #666666;
	}
	
	.withknown-plugin .span2 {
		margin-left: 0px;
	}
	
    .withknown-plugin h4 {
		color: #222;
	}

    .withknown-pro-block {
        text-align: center;
        border: 0;
        border-top: 2px #ccc solid;
        border-bottom: 2px #ccc solid;
        margin-bottom: 2em;
        margin-top: 20px;
    }
</style><link rel="stylesheet" href="../../IdnoPlugins/Checkin/external/leaflet/leaflet.css"/>
<!--[if lte IE 8]>
<link rel="stylesheet" href="https://www.theojones.name/IdnoPlugins/Checkin/external/leaflet/leaflet.ie.css"/>
<![endif]-->
<script type="text/javascript" src="../../IdnoPlugins/Checkin/external/leaflet/leaflet.js"></script>
<script type="text/javascript" src="../../IdnoPlugins/Checkin/external/stamen-maps/tile.stamen.js"></script>
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script><link rel="openid.delegate" href="../../index.html" />
<link rel="openid.server" href="https://indieauth.com/openid" />
<link rel="authorization_endpoint" href="../../session/login-fwd=https-%7C%7Cwww.theojones.name%7Cindieauth%7Cauth.html">
<link rel="token_endpoint" href="../../indieauth/token.html">
<link rel="micropub" href="../../session/login-fwd=%7Cmicropub%7Cendpoint.html"><link href="../../Themes/Solo/css/default.css" rel="stylesheet">    
</head>

<body class="idno_pages_homepage page-content page-content-posts logged-out">
<div id="pjax-container" class="page-container">
    <a href="index-q=-vps.html#maincontent" style="display:none">Skip to main content</a>
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" tabindex="1" href="../../index.html">Theo Jones</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="navbar-collapse">

            <form class="navbar-form navbar-left" action="https://www.theojones.name/content/posts" method="get" role="search">
    <div class="form-group">
        <input type="search" class="search-query form-control" name="q" placeholder="Search" tabindex="2" value="#vps">
    </div>
</form><ul class="nav navbar-nav">
        
            <li class="dropdown" tabindex="3">
                <a href="index-q=-vps.html#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                    Posts                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="../../index-q=-vps.html"><span class="dropdown-menu-icon">&nbsp;</span>
                            Default content</a></li>
                    <li><a href="../all/index-q=-vps.html"><span class="dropdown-menu-icon">&nbsp;</span>
                            All content</a></li>
                                                    <li><a
                                    href="../statusupdates/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-comment-o"></i></span> Status updates                                </a></li>                                <li><a
                                    href="index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-align-left"></i>
</span> Posts                                </a></li>                                <li><a
                                    href="../photos/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-picture-o"></i>
</span> Photos                                </a></li>                                <li><a
                                    href="../locations/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-map-marker"></i>
</span> Locations                                </a></li>                                <li><a
                                    href="../bookmarkedpages/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-bookmark"></i>
</span> Bookmarked pages                                </a></li>                                <li><a
                                    href="../audio/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-microphone"></i>
</span> Audio                                </a></li>                                <li><a
                                    href="../events/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-calendar"></i>
</span> Events                                </a></li>                                <li><a
                                    href="../rsvp/index-q=-vps.html"><span
                                        class="dropdown-menu-icon"><i class="fa fa-calendar-o"></i>
</span> RSVP                                </a></li>

                </ul>
            </li>

    </ul>
            <ul class="nav navbar-nav navbar-right">
                

    <li><a href="../../session/login.html">Sign in</a></li>            </ul>

        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
    <div class="container page-body">
        <a name="pagecontent"></a>
                        <div class="row profile h-card">
    <div class="col-md-8 col-md-offset-2">
        <!--<div class="row visible-sm">
            <div class="col-md-2">
                <div style="margin-bottom: 2em; margin-top: -2em; text-align: center">
                    <p>
                                            </p>

                    <p style="margin-bottom: 2em" clear="all"></p>
                </div>
            </div>
        </div>-->
        <div class="row">
            <div class="col-md-4 namebadge">
                <p>
                    <a href="../../profile/tjones2.html" class="u-url icon-container"><img class="u-photo"
                                                                                               src="https://www.theojones.name/file/de911cc1bf544396092c15df5d71aa2e"/></a>
                </p>

                                            </div>
            
            <div class="col-md-8 namebadge-profile">
                <div class="row">
                    <div class="col-md-12">
                        <h1 class="p-profile">
                            <a href="../../profile/tjones2.html"
                               class="u-url p-name fn">Theo Jones</a>
                        </h1>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="e-note"></div>

                                            </div>
                </div>
            </div>
        </div>
    </div>
</div>            <div class="row idno-entry idno-entry-entry">

                <div
                    class="col-md-8 col-md-offset-2 h-entry idno-posts idno-object idno-content">
                    <div style="display: none"> <!-- This is useful for webmentions -->
                        <p class="p-author author h-card vcard">
                            <a href="../../profile/tjones2.html" class="icon-container"><img
                                    class="u-logo logo u-photo photo" src="https://www.theojones.name/file/de911cc1bf544396092c15df5d71aa2e"/></a>
                            <a class="p-name fn u-url url" href="../../profile/tjones2.html">Theo Jones</a>
                            <a class="u-url" href="../../profile/tjones2.html">
                                <!-- This is here to force the hand of your MF2 parser --></a>
                        </p>
                    </div>
                                        <div class="e-content entry-content">
                        <div>
                <h2 class="p-name"><a
                    href="../../2013/webemail-server-configuration-with-virtualmin-on-ubuntu-1204.html">Web/Email Server Configuration With Virtualmin on Ubuntu 12.04</a>
            </h2>
                    <p class="reading">
                <span class="vague">3 min read </span>
            </p>
            
<p>I have recently moved the VPS that this blog is hosted on to a Virtualmin install on Ubuntu 12.04. This tutorial shows how I have configured it. Virtualmin is a free program that can install and manage common server services. Among other things it can manage email (defaulting to the</p>

<p>postfix/dovecot servers), web (defaulting to Apache), and mailing lists (using <a class="zem_slink" title="GNU Mailman" href="http://www.gnu.org/software/mailman/" target="_blank" rel="homepage">GNU Mailman</a>). For this tutorial I will assume you have a working Ubuntu 12.04 install. I am using the free/open source GPL licensed version of Virtualmin instead of the proprietary version.</p>
<!--more--><h3>Install Virtualmin and Dependencies</h3>
<p>Virtualmin's developers have produced a script that installs Virtualmin and all of its dependencies. Download the install script with the following command.</p>

<p><em>wget <a href="http://software.virtualmin.com/gpl/scripts/install.sh"></a><a href="http://software.virtualmin.com/gpl/scripts/install.sh">http:/<wbr></wbr>/<wbr></wbr>software.virtualmin.com/<wbr></wbr>gpl/<wbr></wbr>scripts/<wbr></wbr>install.sh</a></em></p>

<p>Run the script to install Virtualmin and its dependencies.</p>

<p><em>/bin/sh install.sh</em></p>

<p>Wait while Virtualmin updates and installs.</p>
<h3>Create a Swap File</h3>
<p>Some of the components of the Virtualmin system can cause peaks of memory usage that can overfill the system ram on some low memory installations.The spam and virus checking programs (Spamassin and ClamAV) used by Virtualmin are particularly likely to cause peaks of RAM usage. For this reason, it is a good idea to create a swap file if you haven't created a swap partition during your install of Ubuntu.Most images distributed by VPS hosts do not include swap space. Run the following commands to create a 1GB swap file.</p>

<p><em>fallocate -l 1000M /swapfile</em></p>

<p><em>chmod 600 /swapfile</em></p>

<p><em>mkswap /swapfile</em></p>

<p>Set the swap file to load on boot by adding a line to /etc/fstab</p>

<p><em>Nano /etc/fstab</em></p>

<p>add</p>

<p><em>/swapfile none swap defaults 0 0</em></p>
<h3>Common PHP Extensions</h3>
<p>Curl and PHP5-gd are common PHP extensions that many PHP applications require. Install them with the following commands.<br /><em>apt-get clean && apt-get update && apt-get install php5-curl</em></p>

<p><em>apt-get install php5-gd</em></p>
<h3>Configure Virtualmin</h3>
<p>Now we have a Virtualmin install with all dependencies. Now it is time to configure Virtualmin.</p>

<p>Go to https://<your ip here>:10000/ and run through the Virtualmin configuration wizard.<br /><br />In my experience, the default PHP upload file size limit is too low for many applications. Change the upload settings with the following procedure. Under Services find "PHP 5 Configuration". Then click "Resource Limits".Edit the "Maximum file upload size" textbox. Save your changes.<br /><br /><a class="zem_slink" title="Greylisting" href="http://en.wikipedia.org/wiki/Greylisting" target="_blank" rel="wikipedia">Greylisting</a> is a powerful anti-spam technique that exploits the fact that spammers rarely use standards compliant email servers.The standards for the email protocol allow the receiving server to declare that it is temporarily unavailable instead of outright accepting or rejecting a message. If this happens a standards compliant server will wait and then resend the message.Most spambots will not. Greylisting configures the mail server to declare that it is temporarily unavailable the first time that a server that has never delivered an email to you attempts to send an email. Greylisting may delay some of your email but it is one of the most effective anti-spam methods. To enable it follow the following steps.<br />Under "Email Messages" find "Email Greylisting".Click "Install Greylisting". Under "Email Messages" find "Email Greylisting". Click "Enable Greylisting".<br /><br />DKIM is another anti-spam technique that attempts to filter out spoofed email headers. To enable it follow the following steps. Under "Email Messages" find "DomainKeys Identified Mail". Click "install DKIM".<br /><br /><h3>Add Domain Name</h3><br /><br />You now have a fully configured Virtualmin installation. To add a domain name to it follow the following steps  Click "Create Virtual Server". Fill out the form that appears.<p><a href="../../tag/adddomainname.html" class="p-category" rel="tag">#adddomainname</a> <a href="../../tag/configurevirtualmin.html" class="p-category" rel="tag">#configurevirtualmin</a> <a href="../../tag/old.html" class="p-category" rel="tag">#old</a> <a href="../../tag/old.html" class="p-category" rel="tag">#old</a> <a href="../../tag/php.html" class="p-category" rel="tag">#php</a> <a href="../../tag/uncategorized.html" class="p-category" rel="tag">#uncategorized</a> <a href="../../tag/vps.html" class="p-category" rel="tag">#vps</a></p></your></p>
</div>                    </div>
                    <div class="footer">
                        
        <div class="permalink">
            <p>
                <a href="../../profile/tjones2.html">Theo Jones</a>published this
                <a class="u-url url" href="../../2013/webemail-server-configuration-with-virtualmin-on-ubuntu-1204.html" rel="permalink"><time class="dt-published"
                          datetime="2013-09-07T20:03:20+0000">07 Sep 2013</time></a>
                                                                            </p>
        </div>
        <div class="interactions">
	        <span class="annotate-icon">
                        <a class="stars" href="../../2013/webemail-server-configuration-with-virtualmin-on-ubuntu-1204.html#comments"><i class="fa fa-star-o"></i> 0 stars</a></span>
                   <span class="annotate-icon"> <a class="comments" href="../../2013/webemail-server-configuration-with-virtualmin-on-ubuntu-1204.html#comments"><i class="fa fa-comments"></i> 0 comments</a></span>
            <a class="shares" href="../../2013/webemail-server-configuration-with-virtualmin-on-ubuntu-1204.html#comments"></a>
            <a class="shares" href="../../2013/webemail-server-configuration-with-virtualmin-on-ubuntu-1204.html#comments"></a>
        </div>
        <br clear="all"/>
                            </div>
                </div>

            </div>

        
        <div class="pager">
            <ul>
                                <li><a href="index-q=-vps&amp;offset=10.html" title="Older" rel="prev">Older &raquo;</a></li>            </ul>
        </div>

        <div class="blank-footer">
    <div>
        <p class="footer"><a href="https://withknown.com/?utm_source=footer&amp;utm_medium=installation" class="u-platform"><img src="../../gfx/logos/logo_k.png" style="height: 1.5em"></a></p>
    </div>
</div>
    </div>
    <!-- /container -->

        
</div>
<!-- Everything below this should be includes, not content -->

<!-- Le javascript -->
<!-- Placed at the end of the document so the pages load faster -->
<script
    src="../../external/jquery-timeago/jquery.timeago.js"></script>
<script
    src="../../external/jquery-pjax/jquery.pjax.js"></script>
<script src="../../external/underscore/underscore-min.js"
        type="text/javascript"></script>
<!--<script src="https://www.theojones.name/external/mention/bootstrap-typeahead.js"
        type="text/javascript"></script>
<script src="https://www.theojones.name/external/mention/mention.js"
        type="text/javascript"></script> -->


<!-- Flexible media player -->
<script
    src="../../external/mediaelement/build/mediaelement-and-player.min.js"></script>
<link rel="stylesheet"
      href="../../external/mediaelement/build/mediaelementplayer.css"/>
<!-- Video shim -->
<script src="../../external/fitvids/jquery.fitvids.min.js"></script>
<!-- Mention styles -->
<link rel="stylesheet" type="text/css"
      href="../../external/mention/recommended-styles.css">


<!-- HTML5 form element support for legacy browsers -->
<script src="../../external/h5f/h5f.min.js"></script>

<script>

    function annotateContent() {
        $(".h-entry").fitVids();
        $("time.dt-published").timeago();
    }

    // Shim so that JS functions can get the current site URL
    function wwwroot() {
        return 'https://www.theojones.name/';
    }

    $(document).ready(function () {
        $.timeago.settings.cutoff = 30 * 24 * 60 * 60 * 1000; // 1 month
        annotateContent();
    });

    /**
     * Handle Twitter tweet embedding
     */
    $(document).ready(function () {
        $('div.twitter-embed').each(function (index) {
            var url = $(this).attr('data-url');
            var div = $(this);

            $.ajax({
                url: "https://api.twitter.com/1/statuses/oembed.json?url=" + url,
                dataType: "jsonp",
                success: function (data) {
                    div.html(data['html']);
                }
            });
        });

        $('body').on('click', function (event, el) {
            var clickTarget = event.target;

            if (clickTarget.href && clickTarget.href.indexOf(window.location.origin) === -1) {
                clickTarget.target = "_blank";
            }
        });
    });

    /**
     * Handle Soundcloud oEmbed code
     */
    $(document).ready(function () {
        $('div.soundcloud-embed').each(function (index) {
            var url = $(this).attr('data-url');
            var div = $(this);

            $.getJSON('https://soundcloud.com/oembed?callback=?',
                {
                    format: 'js',
                    url: url,
                    iframe: true
                },
                function (data) {
                    div.html(data['html']);
                }
            );
        });
    });

    /**
     * Better handle links in iOS web applications.
     * This code (from the discussion here: https://gist.github.com/kylebarrow/1042026)
     * will prevent internal links being opened up in safari when known is installed
     * on an ios home screen.
     */
    (function (document, navigator, standalone) {
        if ((standalone in navigator) && navigator[standalone]) {
            var curnode, location = document.location, stop = /^(a|html)$/i;
            document.addEventListener('click', function (e) {
                curnode = e.target;
                while (!(stop).test(curnode.nodeName)) {
                    curnode = curnode.parentNode;
                }
                if ('href' in curnode && ( curnode.href.indexOf('http') || ~curnode.href.indexOf(location.host) ) && (!curnode.classList.contains('contentTypeButton'))) {
                    e.preventDefault();
                    location.href = curnode.href;
                }
            }, false);
        }
    })(document, window.navigator, 'standalone');

</script>

<script>
    $('video').mediaelementplayer({
        features: ['playpause','progress','current','tracks','volume','fullscreen'],
        alwaysShowControls: false,
        pauseOtherPlayers: true,
        enableAutosize: false,
        mediaWidth: -1,
        mediaHeight: -1
    });
    $('audio').mediaelementplayer({
        features: ['playpause','progress','current','tracks','volume','fullscreen'],
        alwaysShowControls: false,
        pauseOtherPlayers: true,
        enableAutosize: false,
        mediaWidth: -1,
        mediaHeight: -1
    });
</script>
<style>.known-media-element {
        width: 100%;
        height: 100%;
    }
</style><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
</body>


</html>
